import{g as y}from"./index.CB87Sc6I.js";const q="imcaletrio_loader_shown",D="imcaletrio_intro_done",at="im_locale";function I(){return!!window.matchMedia&&window.matchMedia("(prefers-reduced-motion: reduce)").matches}function rt(){const t=navigator,n=t?.connection?.saveData===!0,e=typeof t?.deviceMemory=="number"?t.deviceMemory:null,o=typeof navigator.hardwareConcurrency=="number"?navigator.hardwareConcurrency:null;return n||e!==null&&e<=4||o!==null&&o<=4}async function it(t){const o=`${(t.getAttribute("src")||t.src||"").split("?")[0]}?cb=${Date.now()}`;try{t.src=o}catch{}try{if(typeof t.decode=="function"){await t.decode();return}}catch{}await new Promise(r=>{const a=()=>r();t.addEventListener("load",a,{once:!0}),t.addEventListener("error",a,{once:!0}),window.setTimeout(a,250)})}function G(){return window.__imSwapInProgress===!0||I()}function st(){const t=document.documentElement;t.dataset.localePersist!=="1"&&(t.dataset.localePersist="1",document.addEventListener("click",n=>{const e=n.target;if(!(e instanceof Element))return;const o=e.closest("a.im-locale-item");if(!(o instanceof HTMLAnchorElement))return;const r=(o.getAttribute("aria-label")||"").toLowerCase();if(r)try{localStorage.setItem(at,r)}catch{}},!0))}function ct(){const t=document.querySelector('[data-page="home"]');if(!(t instanceof HTMLElement))return;const n=t.querySelector('[data-intro="title"]'),e=Array.from(t.querySelectorAll("[data-intro]")).filter(a=>a instanceof HTMLElement);if(!e.length)return;I()||(y.set(e,{opacity:0,y:14}),n instanceof HTMLElement&&y.set(n,{opacity:0,y:22,scale:.98}));try{document.documentElement.removeAttribute("data-intro")}catch{}if(I()){e.forEach(a=>{a.style.opacity="1",a.style.transform="none"});return}const o=y.timeline({defaults:{ease:"power3.out"}});n instanceof HTMLElement&&o.to(n,{opacity:1,y:0,scale:1,duration:.65,clearProps:"transform,opacity"}),o.to({},{duration:.75});const r=e.filter(a=>a!==n);r.length&&o.to(r,{opacity:1,y:0,duration:.5,stagger:.06,clearProps:"transform,opacity"})}function K(t){const n=document.documentElement,e=t==="light"?"light":"dark";n.setAttribute("data-theme",e),localStorage.setItem("im_theme",e)}function dt(){const t=document.querySelector("[data-theme-toggle]");if(!(t instanceof HTMLButtonElement))return;const n=a=>a==="light"?"light":"dark";let e=0;const o=a=>{window.clearTimeout(e),document.documentElement.classList.add("im-theme-anim"),a(),e=window.setTimeout(()=>{document.documentElement.classList.remove("im-theme-anim")},800)};t.onclick=()=>{const s=n(localStorage.getItem("im_theme"))==="dark"?"light":"dark";o(()=>{K(s),t.setAttribute("data-theme",s)})};const r=n(localStorage.getItem("im_theme"));K(r),t.setAttribute("data-theme",r)}function lt(){const t=document.querySelector("[data-locale-select]");t instanceof HTMLSelectElement&&(t.onchange=()=>{const n=t.value.toLowerCase(),e=location.pathname,o=e.split("/").filter(Boolean);o[0]?o[0]=n:o.unshift(n),location.href="/"+o.join("/")+(e.endsWith("/")?"/":"")})}function mt(){const t=!!document.querySelector('[data-page="home"]');if(document.body.classList.toggle("im-home-noscroll",t),!t){document.body.classList.remove("im-home-expanded");return}document.body.classList.remove("im-home-expanded");const n=document.querySelector("main.im-home-main");n instanceof HTMLElement&&(n.scrollTop=0)}function ut(){const t=document.querySelector('[data-page="home"]');if(!(t instanceof HTMLElement))return;const n=t.querySelector(".im-home-about-inline");n instanceof HTMLElement&&n.dataset.moreBound!=="1"&&(n.dataset.moreBound="1",n.addEventListener("click",()=>{if(document.body.classList.contains("im-home-expanded"))return;document.body.classList.add("im-home-expanded");const e=document.querySelector("main.im-home-main");if(e instanceof HTMLElement)try{e.scrollTo({top:e.scrollTop+1,behavior:"smooth"})}catch{}}))}function ht(){const t=document.querySelector('[data-carousel="blog"]');if(!(t instanceof HTMLElement)||t.dataset.bound==="1")return;t.dataset.bound="1";const n=Array.from(t.querySelectorAll(".im-carousel-card")).filter(c=>c instanceof HTMLElement);if(n.length<2)return;const e=()=>{t.style.paddingLeft="10px",t.style.paddingRight="10px";const S=Math.round(10/2);t.style.paddingTop=`${S}px`,t.style.paddingBottom=`${S}px`,t.style.scrollPaddingLeft="10px",t.style.scrollPaddingRight="10px"};e(),window.addEventListener("resize",e);let o=0,r=0,a=0;const s=()=>{r&&window.clearInterval(r),r=0},i=()=>{r||(r=window.setInterval(()=>{o=(o+1)%n.length;try{n[o].scrollIntoView({behavior:"smooth",inline:"start",block:"nearest"})}catch{}},4200))},m=()=>{s(),window.clearTimeout(a),a=window.setTimeout(i,5e3)};t.addEventListener("mouseenter",s),t.addEventListener("mouseleave",i),t.addEventListener("focusin",s),t.addEventListener("focusout",i),t.addEventListener("pointerdown",m),t.addEventListener("touchstart",s,{passive:!0}),t.addEventListener("touchend",m,{passive:!0}),document.addEventListener("visibilitychange",()=>{document.hidden?s():i()}),i()}function ft(){document.documentElement.dataset.anim="1";const t=Array.from(document.querySelectorAll('[data-animate="in"]'));if(t.length){if(I()){t.forEach(n=>{n instanceof HTMLElement&&(n.style.opacity="1",n.style.transform="none")});return}y.to(t,{opacity:1,y:0,duration:.55,ease:"power3.out",stagger:.06,overwrite:!0})}}function wt(){const t=document.querySelector("[data-im-nav]");if(!(t instanceof HTMLElement))return;const n=t.querySelector(".im-nav-indicator");if(!(n instanceof HTMLElement))return;const e=Array.from(t.querySelectorAll(".im-navitem")).filter(c=>c instanceof HTMLAnchorElement);if(!e.length)return;const o=()=>e.find(c=>c.getAttribute("data-active")==="1")||e[0],r=c=>{const S=t.getBoundingClientRect(),T=c.getBoundingClientRect(),_=12,M=Math.round(T.left-S.left+_),E=Math.max(0,Math.round(T.width-_*2));n.style.opacity="1",n.style.transform=`translateX(${M}px)`,n.style.width=`${E}px`},a=()=>e.forEach(c=>c.removeAttribute("data-hot")),s=c=>{t.setAttribute("data-hover",c?"1":"0")},i=c=>{a(),c.setAttribute("data-hot","1")},m=()=>{s(!1),a(),r(o())};m(),e.forEach(c=>{c.addEventListener("mouseenter",()=>{s(!0),i(c),r(c)})}),t.addEventListener("mouseleave",m),window.addEventListener("resize",()=>{if(t.getAttribute("data-hover")==="1"){const c=e.find(S=>S.getAttribute("data-hot")==="1");r(c||o())}else r(o())})}function pt(){const t=document.documentElement;if(t.dataset.imScrollbarFx==="1")return;t.dataset.imScrollbarFx="1";let n=0;const e=()=>{t.dataset.imScrollbarHot="1",window.clearTimeout(n),n=window.setTimeout(()=>{t.dataset.imScrollbarHot="0"},650)};window.addEventListener("scroll",e,{passive:!0}),window.addEventListener("wheel",e,{passive:!0}),window.addEventListener("keydown",o=>{const r=o.key;(r==="ArrowDown"||r==="ArrowUp"||r==="PageDown"||r==="PageUp"||r==="Home"||r==="End"||r===" ")&&e()},{passive:!0})}function yt(){const t=document.documentElement;if(t.dataset.imScrollbarHoverFx==="1")return;t.dataset.imScrollbarHoverFx="1";let n=0;const e=()=>{const a=window.innerWidth-document.documentElement.clientWidth;n=Math.max(12,a)};e(),window.addEventListener("resize",e,{passive:!0});const o=a=>{t.dataset.imScrollbarHover=a?"1":"0"},r=a=>{if(n<=0){o(!1);return}const s=a.clientX;o(s>=window.innerWidth-n-1)};window.addEventListener("mousemove",r,{passive:!0}),window.addEventListener("mouseleave",()=>{o(!1)},{passive:!0})}function gt(){const t=document.querySelector("[data-im-nav]");if(!(t instanceof HTMLElement))return;const n=Array.from(t.querySelectorAll(".im-navitem")).filter(o=>o instanceof HTMLAnchorElement),e=()=>{document.documentElement.dataset.imOnehot="0",n.forEach(o=>o.removeAttribute("data-im-hot"))};n.forEach(o=>{o.addEventListener("mouseenter",()=>{document.documentElement.dataset.imOnehot="1",n.forEach(r=>r.removeAttribute("data-im-hot")),o.setAttribute("data-im-hot","1")})}),t.addEventListener("mouseleave",e)}async function vt(){const t=document.documentElement,n=G(),e=document.getElementById("im-loader");if(!e)return;const o=()=>{t.dataset.loader="skip",e.setAttribute("aria-hidden","true"),e.setAttribute("hidden","");try{e.remove()}catch{}try{document.dispatchEvent(new CustomEvent("im:loader-done"))}catch{}};if(n||I()){try{sessionStorage.setItem(q,"1")}catch{}o();return}const r=e.querySelector("[data-loader-stage]"),a=e.querySelector("#im-loader-canvas"),s=e.querySelector("#im-loader-animated-logo");if(!(r instanceof HTMLElement)||!(a instanceof HTMLCanvasElement)||!(s instanceof HTMLImageElement)){try{sessionStorage.setItem(q,"1")}catch{}o();return}const i=a.getContext("2d");if(!i){try{sessionStorage.setItem(q,"1")}catch{}o();return}t.dataset.loader="run";try{s.style.opacity="0"}catch{}await it(s);try{s.style.opacity="1"}catch{}const m=rt();let c=60;try{if(typeof y.ticker.fps=="function"){const d=y.ticker.fps();typeof d=="number"&&Number.isFinite(d)&&(c=d),y.ticker.fps(m?30:60)}}catch{}let T=window.setTimeout(()=>{k()},14e3),_=!1,M=0,E=null;const k=d=>{if(!_){_=!0,window.clearTimeout(T);try{M&&cancelAnimationFrame(M)}catch{}try{window.removeEventListener("resize",N),document.removeEventListener("visibilitychange",z)}catch{}try{l&&l.kill()}catch{}try{typeof y.ticker.fps=="function"&&y.ticker.fps(c)}catch{}try{sessionStorage.setItem(q,"1")}catch{}try{a.width=1,a.height=1}catch{}try{E?.close()}catch{}E=null,t.dataset.loader="skip",e.setAttribute("aria-hidden","true"),e.setAttribute("hidden","");try{e.remove()}catch{}try{document.dispatchEvent(new CustomEvent("im:loader-done"))}catch{}}},u={overlay:1,hole:0,s:1,glow:0};let x=0,H=0;const J=()=>{const f=getComputedStyle(document.documentElement).getPropertyValue("--bg").trim().split(/\s+/).map(h=>Number(h)).filter(h=>Number.isFinite(h)),v=f[0]??12,L=f[1]??12,w=f[2]??12;return`rgb(${v},${L},${w})`},F=()=>{const d=Math.max(1,window.innerWidth),f=Math.max(1,window.innerHeight),v=d*f,w=Math.sqrt((m?14e5:32e5)/v),h=Math.min(window.devicePixelRatio||1,w,m?1.25:2);return Math.max(1,h)};let p=F();const W=()=>{p=F(),a.width=Math.max(1,Math.floor(window.innerWidth*p)),a.height=Math.max(1,Math.floor(window.innerHeight*p))},C=()=>{const d=s.getBoundingClientRect();if(d.width>0&&d.height>0){x=d.width,H=d.height;return}const f=a.width/p,v=a.height/p,L=Math.max(1,s.naturalWidth||s.width||1),w=Math.max(1,s.naturalHeight||s.height||1),h=L/w,A=Math.min(f,v)*.28;h>=1?(x=A,H=A/h):(H=A,x=A*h)},Q=()=>{const d=a.width/p,f=a.height/p,v=Math.max(1,x),L=Math.max(1,H),w=Math.max(d/v,f/L)*720;return Math.min(Math.max(1,w),m?90:720)},$=async()=>{if(!E&&"createImageBitmap"in window&&s.complete)try{E=await createImageBitmap(s),g()}catch{E=null}},Z=()=>{const d=a.width/p,f=a.height/p;if(i.setTransform(p,0,0,p,0,0),i.globalAlpha=1,i.filter="none",i.globalCompositeOperation="source-over",i.clearRect(0,0,d,f),i.globalAlpha=u.overlay,i.fillStyle=J(),i.fillRect(0,0,d,f),u.hole>0&&s.complete){const v=Math.max(1,x),L=Math.max(1,H),w=v*u.s,h=L*u.s,A=(d-w)/2,O=(f-h)/2,B=E||s,nt=Math.max(0,Math.min(1,u.glow)),R=Math.min(1,u.hole)*Math.min(1,u.overlay)*nt;if(R>.001){const ot=Math.min(m?120:200,(m?55:80)+u.s*(m?4:6));i.save(),i.globalCompositeOperation="lighter",i.shadowOffsetX=0,i.shadowOffsetY=0,i.shadowColor=`rgba(255,255,255,${(m?.75:.92)*R})`,i.shadowBlur=ot,i.globalAlpha=(m?.26:.4)*R,i.drawImage(B,A,O,w,h),m||i.drawImage(B,A,O,w,h),i.restore()}i.globalCompositeOperation="destination-out",i.globalAlpha=u.hole,i.shadowBlur=0,i.drawImage(B,A,O,w,h),i.globalCompositeOperation="source-over",i.globalAlpha=1}},g=()=>{_||M||(M=requestAnimationFrame(()=>{M=0,Z()}))},N=()=>{W(),C(),g()},z=()=>{document.visibilityState==="hidden"&&k()};window.addEventListener("resize",N),document.addEventListener("visibilitychange",z),W(),C(),g(),$();const b=4.05,U=.08,P=2,X=b+P*.55,V=1,tt=U,et=b,Y=X+V+.08;let l=null;l=y.timeline({defaults:{ease:"power3.inOut"},onComplete:()=>k()}),l.set(r,{opacity:1}),l.set(s,{opacity:1},0),l.to({},{duration:b,ease:"none"}),l.call(()=>{C(),$(),g()},[],b),l.set(u,{glow:0},0),l.to(u,{glow:1,duration:3,ease:"steps(3)",onUpdate:g},1),l.call(()=>{try{e.style.background="transparent"}catch{}},[],b),l.to(u,{hole:1,duration:U,ease:"power2.out",onUpdate:g},b),l.to(s,{opacity:0,duration:tt,ease:"none"},et),l.to(u,{s:()=>Q(),duration:P,ease:"power2.inOut",onUpdate:g},b),l.to(u,{glow:0,duration:P,ease:"power2.inOut",onUpdate:g},b),l.to(u,{overlay:0,duration:V,ease:"power2.inOut",onUpdate:g},X),l.call(()=>{s.setAttribute("hidden",""),e.setAttribute("aria-hidden","true")},[],Y),l.call(()=>{window.clearTimeout(T),T=window.setTimeout(()=>k(),250)},[],Y+.02)}function j(){if(mt(),ut(),pt(),yt(),dt(),lt(),st(),ht(),wt(),gt(),sessionStorage.getItem("im_first_ready")!=="1"){sessionStorage.setItem("im_first_ready","1");return}ft()}document.addEventListener("astro:page-load",()=>{try{document.documentElement.removeAttribute("data-intro")}catch{}if(!!document.querySelector('[data-page="home"]')&&!G()){try{sessionStorage.removeItem(D)}catch{}document.documentElement.dataset.intro="pending",document.addEventListener("im:loader-done",()=>{let e=!1;try{e=sessionStorage.getItem(D)==="1"}catch{}if(!e){try{sessionStorage.setItem(D,"1")}catch{}ct()}},{once:!0})}j(),vt(),window.__imSwapInProgress=!1});document.addEventListener("astro:after-swap",()=>{j()});document.addEventListener("astro:before-swap",()=>{window.__imSwapInProgress=!0;const t=window;t.__imTransition&&typeof t.__imTransition.start=="function"&&t.__imTransition.start()});document.addEventListener("astro:after-swap",()=>{const t=window;t.__imTransition&&typeof t.__imTransition.stop=="function"&&t.__imTransition.stop()});
